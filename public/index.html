<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë•…ì½©ìœ„í‚¤</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            color: white;
        }

        .nav {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .nav button, .nav a {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .nav button:hover, .nav a:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: flex;
            gap: 2rem;
        }

        .sidebar {
            width: 250px;
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            height: fit-content;
            position: sticky;
            top: 2rem;
        }

        .main-content {
            flex: 1;
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            min-height: 600px;
        }

        .search-box {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e1e8ed;
            border-radius: 25px;
            margin-bottom: 1.5rem;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .menu-section {
            margin-bottom: 2rem;
        }

        .menu-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .menu-item {
            display: block;
            padding: 0.5rem 0;
            color: #666;
            text-decoration: none;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
            padding-left: 0.5rem;
        }

        .menu-item:hover {
            color: #667eea;
            background: #f8f9ff;
            padding-left: 1rem;
        }

        .page-title {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid #667eea;
        }

        .page-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #444;
        }

        .edit-area {
            width: 100%;
            min-height: 400px;
            padding: 1rem;
            border: 2px solid #e1e8ed;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .edit-area:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-right: 0.5rem;
            margin-top: 1rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #333;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #555;
        }

        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .user-info {
            color: white;
            font-weight: 500;
        }

        .page-meta {
            background: #f8f9ff;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #666;
        }

        .search-results {
            list-style: none;
        }

        .search-results li {
            background: #f8f9ff;
            margin-bottom: 0.5rem;
            padding: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-results li:hover {
            background: #e8f0ff;
            transform: translateY(-2px);
        }

        .highlight {
            background: #ffeb3b;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
        }

        .history-item {
            background: #f8f9ff;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .history-date {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .error-message {
            background: #ff6b6b;
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .success-message {
            background: #51cf66;
            color: white;
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                padding: 1rem;
            }
            
            .sidebar {
                width: 100%;
                position: static;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        .viral-container {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 1rem;
            border-radius: 15px;
            margin-bottom: 1rem;
            text-align: center;
        }

        .viral-score {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .file-upload {
            border: 2px dashed #667eea;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 1rem;
        }

        .file-upload:hover {
            background: #f8f9ff;
            border-color: #5a67d8;
        }

        .file-list {
            list-style: none;
        }

        .file-item {
            background: #f8f9ff;
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-name {
            font-weight: 500;
        }

        .file-size {
            color: #666;
            font-size: 0.9rem;
        }

        .favorite-btn {
            background: none;
            border: none;
            color: #ffd700;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .favorite-btn:hover {
            transform: scale(1.2);
        }

        .favorite-btn.active {
            color: #ff6b6b;
        }

        .blocked-user {
            background: #ff6b6b;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            display: inline-block;
        }

        .activity-item {
            border-left: 4px solid #667eea;
            padding-left: 1rem;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
        }

        .activity-time {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .activity-content {
            font-weight: 500;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="#" class="logo" onclick="showMainPage()">ğŸ¥œ ë•…ì½©ìœ„í‚¤</a>
            <nav class="nav">
                <input type="text" class="search-box" id="headerSearch" placeholder="ë¬¸ì„œ ê²€ìƒ‰..." onkeypress="if(event.key==='Enter') searchDocuments()">
                <span class="user-info" id="userInfo">
                    <button onclick="showLoginModal()">ë¡œê·¸ì¸</button>
                    <button onclick="showRegisterModal()">íšŒì›ê°€ì…</button>
                </span>
            </nav>
        </div>
    </header>

    <div class="container">
        <aside class="sidebar">
            <div class="menu-section">
                <div class="menu-title">íƒìƒ‰</div>
                <a class="menu-item" onclick="showMainPage()">ë©”ì¸ í˜ì´ì§€</a>
                <a class="menu-item" onclick="showRandomPage()">ì„ì˜ ë¬¸ì„œ</a>
                <a class="menu-item" onclick="showAllDocuments()">ëª¨ë“  ë¬¸ì„œ</a>
                <a class="menu-item" onclick="showRecentChanges()">ìµœê·¼ ë³€ê²½</a>
            </div>
            
            <div class="menu-section">
                <div class="menu-title">ì‚¬ìš©ì</div>
                <a class="menu-item" onclick="showUserList()">ì‚¬ìš©ì ëª©ë¡</a>
                <a class="menu-item" onclick="showMyFavorites()">ë‚´ ì¦ê²¨ì°¾ê¸°</a>
                <a class="menu-item" onclick="showActivityFeed()">í™œë™ í”¼ë“œ</a>
            </div>

            <div class="menu-section">
                <div class="menu-title">ë„êµ¬</div>
                <a class="menu-item" onclick="showCreatePage()">ìƒˆ ë¬¸ì„œ ë§Œë“¤ê¸°</a>
                <a class="menu-item" onclick="showFileManager()">íŒŒì¼ ê´€ë¦¬</a>
                <a class="menu-item" onclick="showStatistics()">í†µê³„</a>
                <a class="menu-item" onclick="showPopularPages()">ì¸ê¸° ë¬¸ì„œ</a>
                <a class="menu-item" onclick="showBlockedUsers()">ì°¨ë‹¨ëœ ì‚¬ìš©ì</a>
            </div>

            <div class="viral-container">
                <div class="viral-score" id="viralScore">0</div>
                <div>ë°”ì´ëŸ´ ì ìˆ˜</div>
                <div style="font-size: 0.8rem; margin-top: 0.5rem;">
                    í™œë™í• ìˆ˜ë¡ ì¦ê°€!
                </div>
            </div>
        </aside>

        <main class="main-content" id="mainContent">
            <h1 class="page-title">ğŸ¥œ ë•…ì½©ìœ„í‚¤ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</h1>
            <div class="page-content">
                <p>ë•…ì½©ìœ„í‚¤ëŠ” ëª¨ë“  ì‚¬ëŒì´ í•¨ê»˜ ë§Œë“¤ì–´ê°€ëŠ” ì§€ì‹ ê³µìœ  í”Œë«í¼ì…ë‹ˆë‹¤.</p>
                <p>ììœ ë¡­ê²Œ ë¬¸ì„œë¥¼ ì‘ì„±í•˜ê³  í¸ì§‘í•˜ì—¬ ì§€ì‹ì„ ë‚˜ëˆ„ì–´ ë³´ì„¸ìš”.</p>
                
                <h3 style="margin-top: 2rem; color: #667eea;">âœ¨ ì£¼ìš” ê¸°ëŠ¥</h3>
                <ul style="margin-left: 2rem; margin-top: 1rem;">
                    <li>ğŸ“ ì‹¤ì‹œê°„ ë¬¸ì„œ í¸ì§‘</li>
                    <li>ğŸ” ê°•ë ¥í•œ ê²€ìƒ‰ ê¸°ëŠ¥</li>
                    <li>ğŸ“Š ìƒì„¸í•œ í†µê³„ ì •ë³´</li>
                    <li>â­ ì¦ê²¨ì°¾ê¸° ì‹œìŠ¤í…œ</li>
                    <li>ğŸ“± ëª¨ë°”ì¼ ìµœì í™”</li>
                    <li>ğŸ›¡ï¸ ìŠ¤íŒ¸ ìë™ ì°¨ë‹¨</li>
                    <li>ğŸš€ ë°”ì´ëŸ´ ë§ˆì¼€íŒ… ì‹œìŠ¤í…œ</li>
                </ul>

                <h3 style="margin-top: 2rem; color: #667eea;">ğŸš€ ì‹œì‘í•˜ê¸°</h3>
                <p style="margin-top: 1rem;">
                    1. íšŒì›ê°€ì…ì„ í•˜ì—¬ ê³„ì •ì„ ë§Œë“œì„¸ìš”<br>
                    2. ìƒˆ ë¬¸ì„œë¥¼ ë§Œë“¤ê±°ë‚˜ ê¸°ì¡´ ë¬¸ì„œë¥¼ í¸ì§‘í•´ë³´ì„¸ìš”<br>
                    3. ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ê³¼ ì§€ì‹ì„ ê³µìœ í•˜ê³  í† ë¡ í•˜ì„¸ìš”
                </p>
                
                <div style="margin-top: 2rem; padding: 1rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 15px;">
                    <h4>ğŸ’¡ ìœ„í‚¤ ë¬¸ë²• ë„ì›€ë§</h4>
                    <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                        **êµµê²Œ** *ê¸°ìš¸ì„* [[ë§í¬]] === ì œëª© === ë“±ì˜ ë¬¸ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                </div>
            </div>
        </main>
    </div>

    <!-- ë¡œê·¸ì¸ ëª¨ë‹¬ -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">ë¡œê·¸ì¸</h2>
            <div class="form-group">
                <label>ì‚¬ìš©ìëª…</label>
                <input type="text" id="loginUsername" placeholder="ì‚¬ìš©ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <div class="form-group">
                <label>ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" id="loginPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <button class="btn" onclick="login()">ë¡œê·¸ì¸</button>
            <button class="btn btn-secondary" onclick="closeModal('loginModal')">ì·¨ì†Œ</button>
        </div>
    </div>

    <!-- íšŒì›ê°€ì… ëª¨ë‹¬ -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <h2 class="modal-title">íšŒì›ê°€ì…</h2>
            <div class="form-group">
                <label>ì‚¬ìš©ìëª…</label>
                <input type="text" id="registerUsername" placeholder="ì‚¬ìš©ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <div class="form-group">
                <label>ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" id="registerPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <div class="form-group">
                <label>ì´ë©”ì¼</label>
                <input type="email" id="registerEmail" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <button class="btn" onclick="register()">íšŒì›ê°€ì…</button>
            <button class="btn btn-secondary" onclick="closeModal('registerModal')">ì·¨ì†Œ</button>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜ë“¤
        let currentUser = null;
        let currentPage = 'main';
        let documents = JSON.parse(localStorage.getItem('wiki_documents') || '{}');
        let users = JSON.parse(localStorage.getItem('wiki_users') || '{}');
        let pageViews = JSON.parse(localStorage.getItem('wiki_views') || '{}');
        let favorites = JSON.parse(localStorage.getItem('wiki_favorites') || '{}');
        let uploadedFiles = JSON.parse(localStorage.getItem('wiki_files') || '{}');
        let blockedUsers = JSON.parse(localStorage.getItem('wiki_blocked') || '[]');
        let violations = JSON.parse(localStorage.getItem('wiki_violations') || '{}');
        let viralScore = parseInt(localStorage.getItem('wiki_viral') || '0');

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            checkLogin();
            updateViralScore();
            showMainPage();
        });

        // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
        function checkLogin() {
            const savedUser = localStorage.getItem('wiki_current_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserInfo();
            }
        }

        // ì‚¬ìš©ì ì •ë³´ ì—…ë°ì´íŠ¸
        function updateUserInfo() {
            const userInfo = document.getElementById('userInfo');
            if (currentUser) {
                userInfo.innerHTML = `
                    <span>ì•ˆë…•í•˜ì„¸ìš”, ${currentUser.username}ë‹˜!</span>
                    <button onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
                `;
            } else {
                userInfo.innerHTML = `
                    <button onclick="showLoginModal()">ë¡œê·¸ì¸</button>
                    <button onclick="showRegisterModal()">íšŒì›ê°€ì…</button>
                `;
            }
        }

        // ëª¨ë‹¬ í‘œì‹œ
        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'block';
        }

        function showRegisterModal() {
            document.getElementById('registerModal').style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // ë¡œê·¸ì¸
        function login() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;

            if (!username || !password) {
                alert('ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì°¨ë‹¨ëœ ì‚¬ìš©ì í™•ì¸
            if (blockedUsers.includes(username)) {
                alert('ì°¨ë‹¨ëœ ì‚¬ìš©ìì…ë‹ˆë‹¤.');
                return;
            }

            if (users[username] && users[username].password === password) {
                currentUser = users[username];
                localStorage.setItem('wiki_current_user', JSON.stringify(currentUser));
                updateUserInfo();
                closeModal('loginModal');
                increaseViralScore(5);
                addActivity('ë¡œê·¸ì¸í–ˆìŠµë‹ˆë‹¤');
            } else {
                alert('ì‚¬ìš©ìëª… ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        }

        // íšŒì›ê°€ì…
        function register() {
            const username = document.getElementById('registerUsername').value;
            const password = document.getElementById('registerPassword').value;
            const email = document.getElementById('registerEmail').value;

            if (!username || !password || !email) {
                alert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (users[username]) {
                alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ìëª…ì…ë‹ˆë‹¤.');
                return;
            }

            // ìŠ¤íŒ¸ ê²€ì‚¬
            if (isSpamUser(username)) {
                alert('ìŠ¤íŒ¸ìœ¼ë¡œ íŒë‹¨ë˜ì–´ íšŒì›ê°€ì…ì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.');
                blockedUsers.push(username);
                localStorage.setItem('wiki_blocked', JSON.stringify(blockedUsers));
                return;
            }

            users[username] = {
                username: username,
                password: password,
                email: email,
                joinDate: new Date().toISOString()
            };

            localStorage.setItem('wiki_users', JSON.stringify(users));
            closeModal('registerModal');
            increaseViralScore(10);
            addActivity(`ìƒˆ ì‚¬ìš©ì ${username}ë‹˜ì´ ê°€ì…í–ˆìŠµë‹ˆë‹¤`);
            alert('íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.');
        }

        // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            currentUser = null;
            localStorage.removeItem('wiki_current_user');
            updateUserInfo();
            addActivity('ë¡œê·¸ì•„ì›ƒí–ˆìŠµë‹ˆë‹¤');
            showMainPage();
        }

        // ë©”ì¸ í˜ì´ì§€ í‘œì‹œ
        function showMainPage() {
            currentPage = 'main';
            const content = `
                <h1 class="page-title">ğŸ¥œ ë•…ì½©ìœ„í‚¤ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</h1>
                <div class="page-content">
                    <p>ë•…ì½©ìœ„í‚¤ëŠ” ëª¨ë“  ì‚¬ëŒì´ í•¨ê»˜ ë§Œë“¤ì–´ê°€ëŠ” ì§€ì‹ ê³µìœ  í”Œë«í¼ì…ë‹ˆë‹¤.</p>
                    <p>ììœ ë¡­ê²Œ ë¬¸ì„œë¥¼ ì‘ì„±í•˜ê³  í¸ì§‘í•˜ì—¬ ì§€ì‹ì„ ë‚˜ëˆ„ì–´ ë³´ì„¸ìš”.</p>
                    
                    <h3 style="margin-top: 2rem; color: #667eea;">âœ¨ ì£¼ìš” ê¸°ëŠ¥</h3>
                    <ul style="margin-left: 2rem; margin-top: 1rem;">
                        <li>ğŸ“ ì‹¤ì‹œê°„ ë¬¸ì„œ í¸ì§‘</li>
                        <li>ğŸ” ê°•ë ¥í•œ ê²€ìƒ‰ ê¸°ëŠ¥</li>
                        <li>ğŸ“Š ìƒì„¸í•œ í†µê³„ ì •ë³´</li>
                        <li>â­ ì¦ê²¨ì°¾ê¸° ì‹œìŠ¤í…œ</li>
                        <li>ğŸ“± ëª¨ë°”ì¼ ìµœì í™”</li>
                        <li>ğŸ›¡ï¸ ìŠ¤íŒ¸ ìë™ ì°¨ë‹¨</li>
                        <li>ğŸš€ ë°”ì´ëŸ´ ë§ˆì¼€íŒ… ì‹œìŠ¤í…œ</li>
                    </ul>

                    <h3 style="margin-top: 2rem; color: #667eea;">ğŸš€ ì‹œì‘í•˜ê¸°</h3>
                    <p style="margin-top: 1rem;">
                        1. íšŒì›ê°€ì…ì„ í•˜ì—¬ ê³„ì •ì„ ë§Œë“œì„¸ìš”<br>
                        2. ìƒˆ ë¬¸ì„œë¥¼ ë§Œë“¤ê±°ë‚˜ ê¸°ì¡´ ë¬¸ì„œë¥¼ í¸ì§‘í•´ë³´ì„¸ìš”<br>
                        3. ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ê³¼ ì§€ì‹ì„ ê³µìœ í•˜ê³  í† ë¡ í•˜ì„¸ìš”
                    </p>
                    
                    <div style="margin-top: 2rem; padding: 1rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 15px;">
                        <h4>ğŸ’¡ ìœ„í‚¤ ë¬¸ë²• ë„ì›€ë§</h4>
                        <p style="margin-top: 0.5rem; font-size: 0.9rem;">
                            **êµµê²Œ** *ê¸°ìš¸ì„* [[ë§í¬]] === ì œëª© === ë“±ì˜ ë¬¸ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // ë¬¸ì„œ í‘œì‹œ
        function showDocument(title) {
            currentPage = title;
            const doc = documents[title];
            
            if (!doc) {
                showCreatePage(title);
                return;
            }

            // ì¡°íšŒìˆ˜ ì¦ê°€
            if (!pageViews[title]) pageViews[title] = 0;
            pageViews[title]++;
            localStorage.setItem('wiki_views', JSON.stringify(pageViews));
            
            const isFavorite = currentUser && favorites[currentUser.username] && favorites[currentUser.username].includes(title);
            
            const content = `
                <div class="page-meta">
                    ì‘ì„±ì: ${doc.author} | 
                    ì‘ì„±ì¼: ${new Date(doc.created).toLocaleDateString()} | 
                    ìˆ˜ì •ì¼: ${new Date(doc.modified).toLocaleDateString()} |
                    ì¡°íšŒìˆ˜: ${pageViews[title] || 0}
                    ${currentUser ? `<button class="favorite-btn ${isFavorite ? 'active' : ''}" onclick="toggleFavorite('${title}')">${isFavorite ? 'â¤ï¸' : 'â­'}</button>` : ''}
                </div>
                <h1 class="page-title">${title}</h1>
                <div class="page-content">${parseWikiText(doc.content)}</div>
                ${currentUser ? `
                    <button class="btn" onclick="editDocument('${title}')">í¸ì§‘</button>
                    <button class="btn btn-secondary" onclick="showHistory('${title}')">ì—­ì‚¬</button>
                ` : ''}
            `;
            document.getElementById('mainContent').innerHTML = content;
            increaseViralScore(1);
        }

        // ë¬¸ì„œ í¸ì§‘
        function editDocument(title) {
            if (!currentUser) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }

            const doc = documents[title];
            const content = `
                <h1 class="page-title">${title} í¸ì§‘</h1>
                <textarea class="edit-area" id="editContent">${doc ? doc.content : ''}</textarea>
                <div>
                    <button class="btn" onclick="saveDocument('${title}')">ì €ì¥</button>
                    <button class="btn btn-secondary" onclick="showDocument('${title}')">ì·¨ì†Œ</button>
                </div>
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // ë¬¸ì„œ ì €ì¥
        function saveDocument(title) {
            const content = document.getElementById('editContent').value;
            
            if (!content.trim()) {
                alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ìŠ¤íŒ¸ ê²€ì‚¬
            if (isSpamContent(content)) {
                addViolation(currentUser.username);
                alert('ìŠ¤íŒ¸ìœ¼ë¡œ íŒë‹¨ë˜ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤.');
                return;
            }

            const now = new Date().toISOString();
            
            if (documents[title]) {
                // ê¸°ì¡´ ë¬¸ì„œ ìˆ˜ì •
                documents[title].content = content;
                documents[title].modified = now;
                documents[title].editor = currentUser.username;
            } else {
                // ìƒˆ ë¬¸ì„œ ìƒì„±
                documents[title] = {
                    title: title,
                    content: content,
                    author: currentUser.username,
                    created: now,
                    modified: now,
                    editor: currentUser.username
                };
            }

            localStorage.setItem('wiki_documents', JSON.stringify(documents));
            showDocument(title);
            increaseViralScore(10);
            addActivity(`ë¬¸ì„œ "${title}"ë¥¼ ${documents[title].created === now ? 'ìƒì„±' : 'ìˆ˜ì •'}í–ˆìŠµë‹ˆë‹¤`);
        }

        // ìƒˆ ë¬¸ì„œ ìƒì„± í˜ì´ì§€
        function showCreatePage(title = '') {
            if (!currentUser) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                return;
            }

            const content = `
                <h1 class="page-title">ìƒˆ ë¬¸ì„œ ë§Œë“¤ê¸°</h1>
                <div class="form-group">
                    <label>ë¬¸ì„œ ì œëª©</label>
                    <input type="text" id="newDocTitle" value="${title}" placeholder="ë¬¸ì„œ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>
                <textarea class="edit-area" id="newDocContent" placeholder="ë¬¸ì„œ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                <div>
                    <button class="btn" onclick="createDocument()">ìƒì„±</button>
                    <button class="btn btn-secondary" onclick="showMainPage()">ì·¨ì†Œ</button>
                </div>
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // ë¬¸ì„œ ìƒì„±
        function createDocument() {
            const title = document.getElementById('newDocTitle').value.trim();
            const content = document.getElementById('newDocContent').value;

            if (!title) {
                alert('ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (documents[title]) {
                alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë¬¸ì„œì…ë‹ˆë‹¤.');
                return;
            }

            if (!content.trim()) {
                alert('ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            // ìŠ¤íŒ¸ ê²€ì‚¬
            if (isSpamContent(content) || isSpamContent(title)) {
                addViolation(currentUser.username);
                alert('ìŠ¤íŒ¸ìœ¼ë¡œ íŒë‹¨ë˜ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤.');
                return;
            }

            const now = new Date().toISOString();
            documents[title] = {
                title: title,
                content: content,
                author: currentUser.username,
                created: now,
                modified: now,
                editor: currentUser.username
            };

            localStorage.setItem('wiki_documents', JSON.stringify(documents));
            showDocument(title);
            increaseViralScore(15);
            addActivity(`ìƒˆ ë¬¸ì„œ "${title}"ë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤`);
        }

        // ë¬¸ì„œ ê²€ìƒ‰
        function searchDocuments() {
            const query = document.getElementById('headerSearch').value.toLowerCase();
            if (!query) return;

            const results = [];
            for (const [title, doc] of Object.entries(documents)) {
                if (title.toLowerCase().includes(query) || doc.content.toLowerCase().includes(query)) {
                    results.push({title, doc});
                }
            }

            const content = `
                <h1 class="page-title">ê²€ìƒ‰ ê²°ê³¼: "${query}"</h1>
                ${results.length > 0 ? `
                    <ul class="search-results">
                        ${results.map(result => `
                            <li onclick="showDocument('${result.title}')">
                                <strong>${highlightText(result.title, query)}</strong>
                                <p>${highlightText(result.doc.content.substring(0, 200) + '...', query)}</p>
                            </li>
                        `).join('')}
                    </ul>
                ` : '<p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>'}
            `;
            document.getElementById('mainContent').innerHTML = content;
            increaseViralScore(2);
        }

        // í…ìŠ¤íŠ¸ í•˜ì´ë¼ì´íŠ¸
        function highlightText(text, query) {
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span class="highlight">$1</span>');
        }

        // ëª¨ë“  ë¬¸ì„œ ë³´ê¸°
        function showAllDocuments() {
            const docList = Object.keys(documents).sort();
            const content = `
                <h1 class="page-title">ëª¨ë“  ë¬¸ì„œ (${docList.length}ê°œ)</h1>
                ${docList.length > 0 ? `
                    <ul class="search-results">
                        ${docList.map(title => `
                            <li onclick="showDocument('${title}')">
                                <strong>${title}</strong>
                                <p>ì‘ì„±ì: ${documents[title].author} | ì¡°íšŒìˆ˜: ${pageViews[title] || 0}</p>
                            </li>
                        `).join('')}
                    </ul>
                ` : '<p>ì•„ì§ ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤.</p>'}
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // ìµœê·¼ ë³€ê²½ì‚¬í•­
        function showRecentChanges() {
            const changes = Object.values(documents)
                .sort((a, b) => new Date(b.modified) - new Date(a.modified))
                .slice(0, 20);

            const content = `
                <h1 class="page-title">ìµœê·¼ ë³€ê²½ì‚¬í•­</h1>
                ${changes.length > 0 ? `
                    <div>
                        ${changes.map(doc => `
                            <div class="history-item">
                                <div class="history-date">${new Date(doc.modified).toLocaleString()}</div>
                                <strong onclick="showDocument('${doc.title}')" style="cursor: pointer; color: #667eea;">${doc.title}</strong>
                                <p>í¸ì§‘ì: ${doc.editor || doc.author}</p>
                            </div>
                        `).join('')}
                    </div>
                ` : '<p>ìµœê·¼ ë³€ê²½ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤.</p>'}
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // ì‚¬ìš©ì ëª©ë¡
        function showUserList() {
            const userList = Object.values(users).sort((a, b) => new Date(b.joinDate) - new Date(a.joinDate));
            const content = `
                <h1 class="page-title">ì‚¬ìš©ì ëª©ë¡ (${userList.length}ëª…)</h1>
                ${userList.length > 0 ? `
                    <div>
                        ${userList.map(user => `
                            <div class="history-item">
                                <strong>${user.username}</strong>
                                <p>ê°€ì…ì¼: ${new Date(user.joinDate).toLocaleDateString()}</p>
                                ${blockedUsers.includes(user.username) ? '<span class="blocked-user">ì°¨ë‹¨ë¨</span>' : ''}
                            </div>
                        `).join('')}
                    </div>
                ` : '<p>ë“±ë¡ëœ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.</p>'}
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // í†µê³„
        function showStatistics() {
            const totalDocs = Object.keys(documents).length;
            const totalUsers = Object.keys(users).length;
            const totalViews = Object.values(pageViews).reduce((sum, views) => sum + views, 0);
            const totalFiles = Object.keys(uploadedFiles).length;

            const content = `
                <h1 class="page-title">í†µê³„</h1>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">${totalDocs}</div>
                        <div class="stat-label">ì´ ë¬¸ì„œ ìˆ˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${totalUsers}</div>
                        <div class="stat-label">ì´ ì‚¬ìš©ì ìˆ˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${totalViews}</div>
                        <div class="stat-label">ì´ ì¡°íšŒìˆ˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${totalFiles}</div>
                        <div class="stat-label">ì—…ë¡œë“œëœ íŒŒì¼</div>
                    </div>
                </div>
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // ì¸ê¸° ë¬¸ì„œ
        function showPopularPages() {
            const popular = Object.entries(pageViews)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10);

            const content = `
                <h1 class="page-title">ì¸ê¸° ë¬¸ì„œ</h1>
                ${popular.length > 0 ? `
                    <ul class="search-results">
                        ${popular.map(([title, views]) => `
                            <li onclick="showDocument('${title}')">
                                <strong>${title}</strong>
                                <p>ì¡°íšŒìˆ˜: ${views}íšŒ</p>
                            </li>
                        `).join('')}
                    </ul>
                ` : '<p>ì¡°íšŒ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>'}
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // ì„ì˜ ë¬¸ì„œ
        function showRandomPage() {
            const docKeys = Object.keys(documents);
            if (docKeys.length === 0) {
                alert('ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            const randomDoc = docKeys[Math.floor(Math.random() * docKeys.length)];
            showDocument(randomDoc);
        }

        // ë¬¸ì„œ íˆìŠ¤í† ë¦¬ (ê°„ë‹¨ ë²„ì „)
        function showHistory(title) {
            const doc = documents[title];
            const content = `
                <h1 class="page-title">${title} - í¸ì§‘ ê¸°ë¡</h1>
                <div class="history-item">
                    <div class="history-date">${new Date(doc.created).toLocaleString()}</div>
                    <strong>ë¬¸ì„œ ìƒì„±</strong>
                    <p>ì‘ì„±ì: ${doc.author}</p>
                </div>
                ${doc.modified !== doc.created ? `
                    <div class="history-item">
                        <div class="history-date">${new Date(doc.modified).toLocaleString()}</div>
                        <strong>ë¬¸ì„œ ìˆ˜ì •</strong>
                        <p>í¸ì§‘ì: ${doc.editor || doc.author}</p>
                    </div>
                ` : ''}
                <button class="btn btn-secondary" onclick="showDocument('${title}')">ë¬¸ì„œë¡œ ëŒì•„ê°€ê¸°</button>
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // ìœ„í‚¤ í…ìŠ¤íŠ¸ íŒŒì‹±
        function parseWikiText(text) {
            return text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/=== (.*?) ===/g, '<h3>$1</h3>')
                .replace(/== (.*?) ==/g, '<h2>$1</h2>')
                .replace(/\[\[(.*?)\]\]/g, '<a href="#" onclick="showDocument(\'$1\')" style="color: #667eea; text-decoration: none; font-weight: 500;">$1</a>')
                .replace(/\n/g, '<br>');
        }

        // ì¦ê²¨ì°¾ê¸° í† ê¸€
        function toggleFavorite(title) {
            if (!currentUser) return;

            if (!favorites[currentUser.username]) {
                favorites[currentUser.username] = [];
            }

            const userFavorites = favorites[currentUser.username];
            const index = userFavorites.indexOf(title);

            if (index > -1) {
                userFavorites.splice(index, 1);
            } else {
                userFavorites.push(title);
            }

            localStorage.setItem('wiki_favorites', JSON.stringify(favorites));
            showDocument(title); // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ í•˜íŠ¸ ìƒíƒœ ì—…ë°ì´íŠ¸
            increaseViralScore(3);
        }

        // ë‚´ ì¦ê²¨ì°¾ê¸°
        function showMyFavorites() {
            if (!currentUser) {
                document.getElementById('mainContent').innerHTML = '<h1 class="page-title">ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</h1>';
                return;
            }

            const userFavorites = favorites[currentUser.username] || [];
            const content = `
                <h1 class="page-title">ë‚´ ì¦ê²¨ì°¾ê¸° (${userFavorites.length}ê°œ)</h1>
                ${userFavorites.length > 0 ? `
                    <ul class="search-results">
                        ${userFavorites.map(title => `
                            <li onclick="showDocument('${title}')">
                                <strong>${title}</strong>
                                <p>ì¡°íšŒìˆ˜: ${pageViews[title] || 0}íšŒ</p>
                            </li>
                        `).join('')}
                    </ul>
                ` : '<p>ì¦ê²¨ì°¾ê¸°í•œ ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤.</p>'}
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // íŒŒì¼ ë§¤ë‹ˆì €
        function showFileManager() {
            if (!currentUser) {
                document.getElementById('mainContent').innerHTML = '<h1 class="page-title">ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</h1>';
                return;
            }

            const fileList = Object.entries(uploadedFiles);
            const content = `
                <h1 class="page-title">íŒŒì¼ ê´€ë¦¬</h1>
                
                <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                    <p>ğŸ“ íŒŒì¼ì„ í´ë¦­í•´ì„œ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
                    <input type="file" id="fileInput" style="display: none" onchange="handleFileUpload(event)">
                </div>

                <h3 style="margin-top: 2rem;">ì—…ë¡œë“œëœ íŒŒì¼ (${fileList.length}ê°œ)</h3>
                ${fileList.length > 0 ? `
                    <ul class="file-list">
                        ${fileList.map(([fileName, fileInfo]) => `
                            <li class="file-item">
                                <div>
                                    <div class="file-name">${fileName}</div>
                                    <div class="file-size">${formatFileSize(fileInfo.size)} | ì—…ë¡œë“œ: ${new Date(fileInfo.uploadDate).toLocaleDateString()}</div>
                                </div>
                                <button class="btn btn-secondary" onclick="downloadFile('${fileName}')">ë‹¤ìš´ë¡œë“œ</button>
                            </li>
                        `).join('')}
                    </ul>
                ` : '<p>ì—…ë¡œë“œëœ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>'}
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // íŒŒì¼ í¬ê¸° ì œí•œ (5MB)
            if (file.size > 5 * 1024 * 1024) {
                alert('íŒŒì¼ í¬ê¸°ëŠ” 5MB ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                uploadedFiles[file.name] = {
                    name: file.name,
                    size: file.size,
                    type: file.type,
                    data: e.target.result,
                    uploader: currentUser.username,
                    uploadDate: new Date().toISOString()
                };
                localStorage.setItem('wiki_files', JSON.stringify(uploadedFiles));
                showFileManager();
                increaseViralScore(5);
                addActivity(`íŒŒì¼ "${file.name}"ì„ ì—…ë¡œë“œí–ˆìŠµë‹ˆë‹¤`);
            };
            reader.readAsDataURL(file);
        }

        // íŒŒì¼ ë‹¤ìš´ë¡œë“œ
        function downloadFile(fileName) {
            const fileInfo = uploadedFiles[fileName];
            if (!fileInfo) return;

            const link = document.createElement('a');
            link.href = fileInfo.data;
            link.download = fileName;
            link.click();
            increaseViralScore(1);
        }

        // íŒŒì¼ í¬ê¸° í¬ë§·
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // ìŠ¤íŒ¸ ê²€ì‚¬
        function isSpamContent(content) {
            const spamKeywords = ['ê´‘ê³ ', 'í™ë³´', 'ëˆë²Œê¸°', 'í´ë¦­', 'ë°”ë¡œê°€ê¸°', 'http://', 'https://'];
            const lowercaseContent = content.toLowerCase();
            return spamKeywords.some(keyword => lowercaseContent.includes(keyword.toLowerCase()));
        }

        function isSpamUser(username) {
            const spamPatterns = [/admin/i, /test/i, /spam/i, /bot/i];
            return spamPatterns.some(pattern => pattern.test(username));
        }

        // ìœ„ë°˜ ê¸°ë¡ ì¶”ê°€
        function addViolation(username) {
            if (!violations[username]) violations[username] = 0;
            violations[username]++;
            
            if (violations[username] >= 3) {
                blockedUsers.push(username);
                localStorage.setItem('wiki_blocked', JSON.stringify(blockedUsers));
                if (currentUser && currentUser.username === username) {
                    logout();
                    alert('ìŠ¤íŒ¸ í–‰ìœ„ë¡œ ì¸í•´ ê³„ì •ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            }
            
            localStorage.setItem('wiki_violations', JSON.stringify(violations));
        }

        // ì°¨ë‹¨ëœ ì‚¬ìš©ì ëª©ë¡
        function showBlockedUsers() {
            const content = `
                <h1 class="page-title">ì°¨ë‹¨ëœ ì‚¬ìš©ì (${blockedUsers.length}ëª…)</h1>
                ${blockedUsers.length > 0 ? `
                    <div>
                        ${blockedUsers.map(username => `
                            <div class="blocked-user">${username}</div>
                        `).join('')}
                    </div>
                ` : '<p>ì°¨ë‹¨ëœ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.</p>'}
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // ë°”ì´ëŸ´ ì ìˆ˜ ì‹œìŠ¤í…œ
        function increaseViralScore(points) {
            viralScore += points;
            localStorage.setItem('wiki_viral', viralScore.toString());
            updateViralScore();
            
            // ë°”ì´ëŸ´ ì´ë²¤íŠ¸ ì‹œë®¬ë ˆì´ì…˜
            if (viralScore % 100 === 0) {
                setTimeout(() => {
                    alert(`ğŸ‰ ë°”ì´ëŸ´ ë ˆë²¨ ì—…! ${viralScore}ì  ë‹¬ì„±! ìœ„í‚¤ê°€ ë”ìš± í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!`);
                }, 1000);
            }
        }

        function updateViralScore() {
            document.getElementById('viralScore').textContent = viralScore;
        }

        // í™œë™ í”¼ë“œ
        let activities = JSON.parse(localStorage.getItem('wiki_activities') || '[]');

        function addActivity(description) {
            activities.unshift({
                user: currentUser ? currentUser.username : 'ìµëª…',
                description: description,
                time: new Date().toISOString()
            });
            
            // ìµœê·¼ 50ê°œ í™œë™ë§Œ ìœ ì§€
            if (activities.length > 50) {
                activities = activities.slice(0, 50);
            }
            
            localStorage.setItem('wiki_activities', JSON.stringify(activities));
        }

        function showActivityFeed() {
            const content = `
                <h1 class="page-title">í™œë™ í”¼ë“œ</h1>
                ${activities.length > 0 ? `
                    <div>
                        ${activities.map(activity => `
                            <div class="activity-item">
                                <div class="activity-time">${new Date(activity.time).toLocaleString()}</div>
                                <div class="activity-content">${activity.user}: ${activity.description}</div>
                            </div>
                        `).join('')}
                    </div>
                ` : '<p>í™œë™ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>'}
            `;
            document.getElementById('mainContent').innerHTML = content;
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ì‹œ ë‹«ê¸°
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        // ì—”í„°í‚¤ë¡œ ë¡œê·¸ì¸/íšŒì›ê°€ì…
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                if (document.getElementById('loginModal').style.display === 'block') {
                    login();
                } else if (document.getElementById('registerModal').style.display === 'block') {
                    register();
                }
            }
        });
    </script>
</body>
</html>